<div class="grid">
    <div class="col-12">
        <div class="card">
            <div class="flex justify-content-end flex-column pb-3 sm:flex-row">
                <button
                    pButton
                    pRipple
                    icon="pi pi-plus"
                    type="button"
                    label="Thêm mới"
                    class="p-button-raised"
                    (click)="display = true"
                ></button>
            </div>
            <p-table
                #dt1
                [value]="users"
                dataKey="id"
                [rows]="10"
                [loading]="loading"
                [rowHover]="true"
                styleClass="p-datatable-gridlines"
                [paginator]="true"
                [globalFilterFields]="[
                    'username',
                    'fullname',
                    'department.name',
                    'status'
                ]"
                responsiveLayout="scroll"
            >
                <ng-template pTemplate="caption">
                    <div
                        class="flex justify-content-between flex-column sm:flex-row"
                    >
                        <button
                            pButton
                            label="Clear"
                            class="p-button-outlined mb-2"
                            icon="pi pi-filter-slash"
                            (click)="clear(dt1)"
                        ></button>
                        <span class="p-input-icon-left mb-2">
                            <i class="pi pi-search"></i>
                            <input
                                pInputText
                                type="text"
                                #filter
                                (input)="onGlobalFilter(dt1, $event)"
                                placeholder="Search Keyword"
                                class="w-full"
                            />
                        </span>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th style="min-width: 10rem">
                            <div
                                class="flex justify-content-between align-items-center"
                            >
                                Người dùng
                                <!-- <p-columnFilter
                                    type="text"
                                    field="username"
                                    display="menu"
                                    placeholder="Search by name"
                                ></p-columnFilter> -->
                            </div>
                        </th>
                        <th style="min-width: 14rem">
                            <div
                                class="flex justify-content-between align-items-center"
                            >
                                Phòng
                                <!-- <p-columnFilter
                                    field="department"
                                    matchMode="in"
                                    display="menu"
                                    [showMatchModes]="false"
                                    [showOperator]="false"
                                    [showAddButton]="false"
                                >
                                    <ng-template pTemplate="header">
                                        <div class="px-3 pt-3 pb-0">
                                            <span class="font-bold"
                                                >Agent Picker</span
                                            >
                                        </div>
                                    </ng-template>
                                    <ng-template
                                        pTemplate="filter"
                                        let-value
                                        let-filter="filterCallback"
                                    >
                                        <p-multiSelect
                                            [ngModel]="value"
                                            [options]="representatives"
                                            placeholder="Any"
                                            (onChange)="filter($event.value)"
                                            optionLabel="name"
                                        >
                                            <ng-template
                                                let-option
                                                pTemplate="item"
                                            >
                                                <div
                                                    class="p-multiselect-representative-option"
                                                >
                                                    <img
                                                        [alt]="option.label"
                                                        src="assets/demo/images/avatar/{{
                                                            option.image
                                                        }}"
                                                        width="32"
                                                        style="
                                                            vertical-align: middle;
                                                        "
                                                    />
                                                    <span class="ml-2">{{
                                                        option.name
                                                    }}</span>
                                                </div>
                                            </ng-template>
                                        </p-multiSelect>
                                    </ng-template>
                                </p-columnFilter> -->
                            </div>
                        </th>
                        <th style="min-width: 10rem">
                            <div
                                class="flex justify-content-between align-items-center"
                            >
                                Ngày tạo
                                <!-- <p-columnFilter
                                    type="date"
                                    field="createddate"
                                    display="menu"
                                    placeholder="mm/dd/yyyy"
                                ></p-columnFilter> -->
                            </div>
                        </th>
                        <th style="min-width: 6rem">
                            <div
                                class="flex justify-content-between align-items-center"
                            >
                                Trạng thái
                                <!-- <p-columnFilter
                                    field="status"
                                    matchMode="equals"
                                    display="menu"
                                >
                                    <ng-template
                                        pTemplate="filter"
                                        let-value
                                        let-filter="filterCallback"
                                    >
                                        <p-dropdown
                                            [ngModel]="value"
                                            [options]="statuses"
                                            (onChange)="filter($event.value)"
                                            placeholder="Any"
                                            [style]="{ 'min-width': '12rem' }"
                                        >
                                            <ng-template
                                                let-option
                                                pTemplate="item"
                                            >
                                                <span>{{ option.label }}</span>
                                            </ng-template>
                                        </p-dropdown>
                                    </ng-template>
                                </p-columnFilter> -->
                            </div>
                        </th>
                        <th style="min-width: 12rem"></th>
                        <!-- <th style="min-width: 8rem">
                            <div
                                class="flex justify-content-between align-items-center"
                            >
                                Verified
                                <p-columnFilter
                                    type="boolean"
                                    field="verified"
                                    display="menu"
                                ></p-columnFilter>
                            </div>
                        </th> -->
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-user>
                    <tr class="max-height:2rem">
                        <td>
                            <img
                                src="assets/demo/images/avatar/{{
                                    user.avatar
                                }}"
                                width="32"
                                style="vertical-align: middle"
                            />
                            <span class="image-text pl-2 ml-2"
                                >{{ user.username }} - {{ user.fullname }}</span
                            >
                        </td>
                        <td>
                            {{ user.department.name }}
                        </td>
                        <td>
                            {{ user.createddate | date: "dd/MM/yyyy HH:mm" }}
                        </td>
                        <td>
                            <span
                                [class]="'user-badge status-' + user.status"
                                >{{ user.status }}</span
                            >
                        </td>
                        <td>
                            <div class="flex justify-content-end gap-2">
                                <button
                                    pButton
                                    pRipple
                                    type="button"
                                    icon="pi pi-pencil"
                                    class="p-button-rounded"
                                    [routerLink]="['./', '{{user.id}}', 'edit']"
                                ></button>
                                <button
                                    pButton
                                    pRipple
                                    type="button"
                                    icon="pi pi-user-edit"
                                    class="p-button-rounded p-button-secondary"
                                    [routerLink]="['./', '{{user.id}}', 'edit']"
                                ></button>
                                <button
                                    pButton
                                    pRipple
                                    type="button"
                                    icon="pi pi-trash"
                                    class="p-button-rounded p-button-danger"
                                    [routerLink]="['./', '{{user.id}}']"
                                ></button>
                            </div>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="8">
                            Không có người dùng nào được tìm thấy.
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="loadingbody">
                    <tr>
                        <td colspan="8">
                            Loading customers data. Please wait.
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>
<p-dialog
    header="Dialog"
    [(visible)]="display"
    [modal]="true"
    showEffect="fade"
    [style]="{ width: '50vw' }"
    [breakpoints]="{ '960px': '75vw' }"
>
    <div class="col-12 md:col-12">
        <div class="card p-fluid">
            <div class="p-formgrid grid">
                <div class="field col">
                    <label htmlFor="username">Tên đăng nhập</label>
                    <input pInputText id="username" type="text" />
                </div>
                <div class="field col">
                    <label htmlFor="fullname">Họ tên</label>
                    <input pInputText id="fullname" type="text" />
                </div>
            </div>
            <div class="p-formgrid grid">
                <div class="field col">
                    <label htmlFor="birthday">Ngày sinh</label>
                    <input pInputText id="birthday" type="text" />
                </div>
                <div class="field col">
                    <label htmlFor="gender">Giới tính</label>
                    <input pInputText id="gender" type="text" />
                </div>
            </div>

            <div class="p-formgrid grid">
                <div class="field col">
                    <label htmlFor="email">Email</label>
                    <input pInputText id="email" type="text" />
                </div>
                <div class="field col">
                    <label htmlFor="phonenumber">Số điện thoại</label>
                    <input pInputText id="phonenumber" type="text" />
                </div>
            </div>
            <div class="field col">
                <label htmlFor="address">Địa chỉ</label>
                <input pInputText id="address" type="text" />
            </div>
            <div class="p-formgrid grid">
                <div class="field col">
                    <label htmlFor="department">Phòng ban</label>
                    <input pInputText id="department" type="text" />
                </div>
                <div class="field col">
                    <label htmlFor="title">Chức danh</label>
                    <input pInputText id="title" type="text" />
                </div>
            </div>
            <div class="field">
                <label htmlFor="avatar">Avatar</label>
                <p-fileUpload
                    name="demo[]"
                    url="./upload.php"
                    (onUpload)="onUpload($event)"
                    [multiple]="true"
                    accept="image/*"
                    [maxFileSize]="1000000"
                    id="avatar"
                >
                    <ng-template pTemplate="content">
                        <ul *ngIf="uploadedFiles.length">
                            <li *ngFor="let file of uploadedFiles">
                                {{ file.name }} - {{ file.size }} bytes
                            </li>
                        </ul>
                    </ng-template>
                </p-fileUpload>
            </div>
        </div>
    </div>
    <ng-template pTemplate="footer">
        <button
            pButton
            icon="pi pi-check"
            (click)="display = false"
            label="Ok"
            class="p-button-outlined"
        ></button>
    </ng-template>
</p-dialog>
