<p-dialog
    header="{{ headerCaption }}"
    [(visible)]="displayAddModal"
    [modal]="true"
    (onHide)="closeModal()"
    showEffect="fade"
    [style]="{ width: '25vw' }"
    [breakpoints]="{ '960px': '75vw' }"
>
    <div>
        <form [formGroup]="formCreate">
            <div class="card p-fluid p-2">
                <div class="p-formgrid grid">
                    <div class="field col pb-0">
                        <label htmlFor="deptCode">Mã Phòng</label>
                        <input
                            pInputText
                            id="deptCode"
                            formControlName="deptCode"
                            [readonly]="modalType === 'Edit'"
                            type="text"
                        />
                        <small
                            class="p-error block"
                            *ngIf="
                                formCreate.controls['deptCode'].invalid &&
                                formCreate.controls['deptCode'].dirty
                            "
                            >Trường này không được bỏ trống</small
                        >
                    </div>
                </div>
                <div class="p-formgrid grid">
                    <div class="field col pb-0">
                        <label htmlFor="deptName">Tên Phòng</label>
                        <input
                            pInputText
                            id="deptName"
                            formControlName="deptName"
                            type="text"
                        />
                        <small
                            class="p-error block"
                            *ngIf="
                                formCreate.controls['deptName'].invalid &&
                                formCreate.controls['deptName'].dirty
                            "
                            >Trường này không được bỏ trống</small
                        >
                    </div>
                </div>
                <div class="p-formgrid grid">
                    <div class="field col pb-0">
                        <label htmlFor="roleId">Trực thuộc</label>
                        <p-dropdown
                            [options]="companies!"
                            formControlName="branch"
                            placeholder="Chọn Chi nhánh"
                            optionLabel="compName"
                            optionValue="compCode"
                            filterBy="compName"
                            [showClear]="true"
                        >
                            <ng-template let-comp pTemplate="item">
                                <div>{{ comp.compName }}</div>
                            </ng-template>
                        </p-dropdown>
                        <small
                            class="p-error block"
                            *ngIf="
                                formCreate.controls['branch'].invalid &&
                                formCreate.controls['branch'].dirty
                            "
                            >Trường này không được bỏ trống</small
                        >
                    </div>
                </div>
            </div>
        </form>
    </div>
    <ng-template pTemplate="footer">
        <button
            pButton
            icon="pi pi-times"
            (click)="closeModal()"
            label="Hủy bỏ"
            class="p-button-outlined"
        ></button>
        <button
            pButton
            icon="pi pi-check"
            (click)="onSubmit()"
            label="Lưu"
            [disabled]="formCreate.invalid"
            class="p-button-outlined"
        ></button>
    </ng-template>
</p-dialog>

<p-toast></p-toast>
